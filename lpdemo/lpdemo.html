<head>
  <title>lpdemo</title>
</head>

<body>
  <div class='container'>
    <h1>Loop Pulse iBeacon Demo</h1>
    {{> reset}}
    <br>
    {{> products}}
    <br>
    <br>
    <br>
    {{> beaconEvents }}
  </div>
</body>

<template name="products">
  <table class="table">
    <thead>
      <tr>
        <th>Product Name</th>
        <th>Current Visitors</th>
        <th>Unique Visitors</th>
        <th>Total Visits</th>
        <th>Total Dwell (seconds)</th>
      </tr>
    </thead>
    <tbody>
      {{#each products}}
      <tr>
        {{> product}}
      </tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="product">
  <td>{{ name }}</td>
  <td>{{ currentVisitors.length }}</td>
  <td>{{ totalVisitors.length }}</td>
  <td>{{ totalVisits }}</td>
  <td>{{ totalDwellRounded }}</td>
</template>

<template name="reset">
  <div style='float: right'>
    <button class='btn btn-link'>Reset</button>
  </div>
</template>

<template name="beaconEvents">
  <h2>Last 10 events</h2>
  <table class="table table-condensed">
    <thead>
      <tr>
        <th>Product Name</th>
        <th>Visitor UUID</th>
        <th>Event Type</th>
        <th>Created At</th>
      </tr>
    </thead>
    <tbody>
      {{#each beaconEvents 10}}
      <tr>{{> beaconEvent }}</tr>
      {{/each}}
    </tbody>
  </table>
</template>

<template name="beaconEvent">
  <td>{{ name }}</td>
  <td>{{ visitorUUID }}</td>
  <td>{{ type }}</td>
  <td>{{ createdAt }}</td>
</template>
